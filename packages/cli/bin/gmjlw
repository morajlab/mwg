#!/usr/bin/env bash

ROOT_PATH=$(dirname $(dirname $(dirname $(dirname $0))))
TEMPLATES_PATH=$ROOT_PATH/packages/templates

g() {
  generate $*
}
generate() {
  local template=
  local path=$(pwd)

  while [ "$#" -gt 0 ]; do
    if [ -z $template ]; then
      if [ ! -d $TEMPLATES_PATH/$1 ]; then
        echo ">>> ERROR  :: template '$1' does not exist."
        exit 1
      fi

      template=$1

      shift
      continue
    fi

    case "${1^^}" in
      "--PATH" | "-P")
        path=$2

        shift
        shift
      ;;
      *)
        shift
      ;;
    esac
  done

  cp -r "$TEMPLATES_PATH/$template" "$path"
}

list() {
  while IFS= read -r template; do
    echo "- $template"
  done < <(ls -aA $TEMPLATES_PATH)
}
l() {
  list $*
}

$1 ${*:2}
